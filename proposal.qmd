---
title: "Proposal title"
subtitle: "Proposal"
author: 
  - name: "Sebastian Robinson (Solo)"
    affiliations:
      - name: "College of Information Science, University of Arizona"
description: "Project description"
format:
  html:
    code-tools: false
    code-overflow: wrap
    embed-resources: true
    html-fig-width: "90%"

editor: source
code-annotations: false
execute:
  echo: false
  results: hide
  warning: false
  message: false
---

```{python}
#| label: load-pkgs
#| message: false
import os
import glob
import numpy as np
import pandas as pd
import sqlite3
from scipy import stats
from pandas.api.types import is_numeric_dtype
import seaborn as sns
from sklearn.cluster import KMeans
from sklearn.discriminant_analysis import StandardScaler
from sklearn.preprocessing import StandardScaler
import matplotlib.pyplot as plt
from scipy.cluster.hierarchy import linkage, dendrogram
BASE_DIR = os.getcwd()
```

## Dataset

The Dataset is composed of 2 files, the PlayerSummaries.csv contains the total count of various resources for each player per turn. The CityInformations.csv contains various per city statistics, such as population, food, gold generation. Together we can view how the player amasses their resources to fuel their strategy towards victory.

```{python}
#| label: load-dataset
#| message: false
# Folder where all CSVs live

output_dir = os.path.join(BASE_DIR, "data", "csv_exports")

files = glob.glob(os.path.join(output_dir, "*.csv"))

dfs = {}

for file in files:
    key = os.path.basename(file)        
    dfs[key] = pd.read_csv(file)


keys = list(dfs.keys())






# load data
df_playerSummaries = dfs["PlayerSummaries.csv"].copy()
df_cityInformation = dfs["CityInformations.csv"].copy()


# get players

player_cols = [f"Player{i}" for i in range(6)]

def determine_active_player(row):
    for i, col in enumerate(player_cols):
        if row[col] == 2:
            return i
    return None

df_playerSummaries["ActivePlayer"] = df_playerSummaries.apply(determine_active_player, axis=1)

# Only 4 players
df_playerSummaries = df_playerSummaries[df_playerSummaries["ActivePlayer"].isin([0, 1, 2, 3])]


# initial EDA on specific metrics vs turn

metrics = [
    "Cities", "Population", "Territory",
    "Gold", "GoldPerTurn",
    "SciencePerTurn", "CulturePerTurn",
    "FaithPerTurn", "TourismPerTurn",
    "Technologies"
]

# Ensure numeric
for m in metrics:
    df_playerSummaries[m] = pd.to_numeric(df_playerSummaries[m], errors="coerce")

def plot_metric(df, metric, use_scatter=False):
    plt.figure(figsize=(6, 5))
    
    for player in sorted(df["ActivePlayer"].unique()):
        sub = df[df["ActivePlayer"] == player]
        x = sub["Turn"]
        y = sub[metric]

        if use_scatter:
            plt.scatter(x, y, s=10, alpha=0.7, label=f"Player {player}")
        else:
            plt.plot(x, y, label=f"Player {player}")
    
    plt.title(f"{metric} vs Turn")
    plt.xlabel("Turn")
    plt.ylabel(metric)
    plt.legend()
    plt.grid(True, linestyle="--", alpha=0.4)
    plt.tight_layout()
    plt.show()

for metric in metrics:
    plot_metric(df_playerSummaries, metric, use_scatter=False)

```
## Questions

What events influnce LLM strategies
How does LLM adapt to the changing environment of the game.

## Analysis plan

Utilizing the PlayerSummaries and CityInformation datasets I will analyze when the LLM changes its strategies, how these strategies change over time and what caused them to change their strategy
I will use the LLM's own recording of its reasoning found in PersonaChanges to validate I have correctly identified a strategy pivot